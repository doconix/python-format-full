!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.format=e():t.format=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>F});const i={global:!1,strict:!0};class s extends Error{constructor(t,e,...i){super(e,...i),this.name=t,Error.captureStackTrace&&Error.captureStackTrace(this,r)}toString(){return`[${this.name}] ${this.message}`}}class r extends s{static unknownFormat(t,e){return new this("UnknownFormat","Unknown format code '"+t+"' for object of type '"+e+"'")}static alternateFormNotAllowed(t,e="\0"){return this.notAllowed("Alternate form (#)",t,e)}static alignmentNotAllowed(t,e){return this.notAllowed("'"+t+"' alignment flag",e,"\0")}static signNotAllowed(t,e){return this.notAllowed("Sign",t,e)}static precisionNotAllowed(t){return this.notAllowed("Precision",t,"\0")}static zeroPaddingNotAllowed(t){return this.notAllowed("Zero padding",t,"\0")}static notAllowed(t,e,i="\0"){let s,r;return"\0"===i?(r="in ",s=""):(r="with ",s=" '"+i+"'"),new this("NotAllowed",t+" not allowed "+r+e+" format specifier"+s)}static precisionTooLarge(t){return new this("PrecisionTooLarge","formatted "+t+" is too long (precision too large?)")}}class n extends s{constructor(t){super("IllegalArgumentException",t)}}class h extends s{constructor(t){super("ValueError",t)}}class a extends s{constructor(t){super("IndexError",t)}}class l extends s{constructor(t){super("KeyError",t)}}class o{static fromText(t){return new o.Parser(t).parse()}static Formatter=class{constructor(t,e){this.spec=e,this.result=t,this.start=this.mark=t.length}getResult(){return this.result.toString()}append(t,e,i){return this.result+=void 0===e&&void 0===i?t:t.substring(e,i),this}setStart(){this.start=this.result.length,this.start>this.mark&&this.reset()}reset(){this.lenSign=this.lenWhole=0}groupDigits(t,e){let i=(this.lenWhole-1)/t;if(i>0){let s=this.start+this.lenSign+this.lenWhole;this.makeSpaceAt(s,i);let r=s+i;for(this.lenWhole+=i;r>s;){for(let e=0;e<t;e++)c(this.result,--r,this.result.charAt(--s));c(this.result,--r,e)}}}makeSpaceAt(t,e){let i=this.spec.getFill(" ");this.result=this.result.substring(0,t)+new Array(e+1).join(i)+this.result.substring(t)}uppercase(){this.result=this.result.toUpperCase()}pad(...t){return t.length>=2?this._pad2(...t):this._pad1(...t)}_pad1(){let t=this.spec.width-(this.result.length-this.mark);return t>0&&this.pad(this.mark,t),this}_pad2(t,e){let i=this.spec.getAlign(">"),s=this.spec.getFill(" "),r=e;"^"===i?r=parseInt(e/2):"<"===i&&(r=0);let n=e-r;if(r>0){"="===i?(this.leftIndex=this.start+this.lenSign,this.lenWhole+=r):this.start+=r,this.makeSpaceAt(t,r);for(let t=0;t<r;t++)c(this.result,this.leftIndex+t,s)}for(let t=0;t<n;t++)this.result+=s;"="===i&&"0"===s&&this.spec.grouping&&this.zeroPadAfterSignWithGroupingFixup(3,",")}zeroPadAfterSignWithGroupingFixup(t,e){let i=this.start+this.lenSign,s=i+this.lenWhole,r=t+1;for(s-=r;s>=i;s-=r)c(this.result,s,e);s+r===i&&(this.result=this.result.substring(0,i)+"0"+this.result.substring(i),this.lenWhole+=1)}};static Spec=class{static NONE="ï¿¿";static UNSPECIFIED=-1;static specified=t=>Number.isInteger(t)?t>=0:t!==this.NONE;constructor(t,e,i,s,r,n,h,a){this.fill=t,this.align=e,this.sign=i,this.alternate=s,this.width=r,this.grouping=n,this.precision=h,this.type=a||this.constructor.NONE}toString(){let t="";return o.Spec.specified(this.fill)&&(t+=this.fill),o.Spec.specified(this.align)&&(t+=this.align),o.Spec.specified(this.sign)&&(t+=this.sign),this.alternate&&(t+="#"),o.Spec.specified(this.width)&&(t+=this.width),this.grouping&&(t+=","),o.Spec.specified(this.precision)&&(t+="."+this.precision),o.Spec.specified(this.type)&&(t+=this.type),t.toString()}withDefaults(t){return new o.Spec(this.constructor.specified(this.fill)?this.fill:t.fill,this.constructor.specified(this.align)?this.align:t.align,this.constructor.specified(this.sign)?this.sign:t.sign,this.alternate||t.alternate,this.constructor.specified(this.width)?this.width:t.width,this.grouping||t.grouping,this.constructor.specified(this.precision)?this.precision:t.precision,this.constructor.specified(this.type)?this.type:t.type)}getFill(t){return this.constructor.specified(this.fill)?this.fill:t}getAlign(t){return this.constructor.specified(this.align)?this.align:t}getPrecision(t){return this.constructor.specified(this.precision)?this.precision:t}getType(t){return this.constructor.specified(this.type)?this.type:t}};static Parser=class{constructor(t){this.spec=t,this.ptr=0}parse(){let t=o.Spec.NONE,e=o.Spec.NONE,i=o.Spec.NONE,s=o.Spec.NONE,r=!1,h=!1,a=o.Spec.UNSPECIFIED,l=o.Spec.UNSPECIFIED;if(this.isAlign()?e=this.spec.charAt(this.ptr++):(this.ptr+=1,this.isAlign()?(t=this.spec.charAt(0),e=this.spec.charAt(this.ptr++)):this.ptr=0),this.isAt("+- ")&&(i=this.spec.charAt(this.ptr++)),r=this.scanPast("#"),this.scanPast("0")&&(o.Spec.specified(t)||(t="0",o.Spec.specified(e)||(e="="))),this.isDigit()&&(a=this.scanInteger()),h=this.scanPast(","),this.scanPast(".")){if(!this.isDigit())throw new n(`Format specifier missing precision: {${this.spec}}`);l=this.scanInteger()}if(this.ptr<this.spec.length&&(s=this.spec.charAt(this.ptr++)),this.ptr!==this.spec.length)throw new n(`Invalid conversion specification: {${this.spec}}`);return new o.Spec(t,e,i,r,a,h,l,s)}scanPast(t){return this.ptr<this.spec.length&&this.spec.charAt(this.ptr)===t&&(this.ptr++,!0)}isAt(t){return this.ptr<this.spec.length&&t.indexOf(this.spec.charAt(this.ptr))>=0}isAlign(){return this.ptr<this.spec.length&&"<^>=".indexOf(this.spec.charAt(this.ptr))>=0}isDigit(){return this.ptr<this.spec.length&&Number.isInteger(parseInt(this.spec.charAt(this.ptr)))}scanInteger(){let t=this.ptr++;for(;this.isDigit();)this.ptr++;return parseInt(this.spec.substring(t,this.ptr))}}}function c(t,e,i){return t.substr(0,e)+i+t.substr(e+i.length)}o.Spec.NUMERIC=new o.Spec(" ",">",o.Spec.NONE,!1,o.Spec.UNSPECIFIED,!1,o.Spec.UNSPECIFIED,o.Spec.NONE),o.Spec.STRING=new o.Spec(" ","<",o.Spec.NONE,!1,o.Spec.UNSPECIFIED,!1,o.Spec.UNSPECIFIED,o.Spec.NONE);class p{constructor(t,e){this.markup=t,this.bytes=!1,this.index=this.nextDotOrBracket(t);let i=t.substring(0,this.index);this.head=+i,isNaN(this.head)&&(this.head=i)}wrap(t){return Number.isInteger(parseInt(t))?parseInt(t):String(t)}nextDotOrBracket(t){let e=t.indexOf(".",this.index);e<0&&(e=t.length);let i=t.indexOf("[",this.index);return i<0&&(i=t.length),Math.min(e,i)}head(){return this.head}pyHead(){return this.wrap(this.head)}*[Symbol.iterator](){for(;;){let t=this.nextChunk();if(null===t)return;yield[t.is_attr,this.wrap(t.value)]}}nextChunk(){if(this.index===this.markup.length)return null;let t=new p.Chunk;if("["===this.markup.charAt(this.index))this.parseItemChunk(t);else{if("."!==this.markup.charAt(this.index))throw new n("Only '.' or '[' may follow ']' in format field specifier");this.parseAttrChunk(t)}return t}parseItemChunk(t){t.is_attr=!1;let e=this.markup.indexOf("]",this.index+1);if(e<0)throw new n("Missing ']' in format string");let i=this.markup.substring(this.index+1,e);if(0===i.length)throw new n("Empty attribute in format string");try{t.value=parseInt(i)}catch(e){t.value=i}this.index=e+1}parseAttrChunk(t){this.index++,t.is_attr=!0;let e=this.nextDotOrBracket(this.markup);if(e===this.index)throw new n("Empty attribute in format string");t.value=this.markup.substring(this.index,e),this.index=e}static Chunk=class{constructor(){this.is_attr=null,this.value=null}}}class u{static TYPE="MarkupIterator";constructor(...t){return t.length>=2?this.constructor2(...t):this.constructor1(...t)}constructor1(t){this.markup=t.getString(),this.bytes=!1,this.numbering=new u.FieldNumbering}constructor2(t,e){this.markup=e,this.bytes=t.bytes,this.numbering=t.numbering}nextChunk(){if(this.index===this.markup.length)return null;let t=new u.Chunk,e=this.index;for(;;){if(e=this.indexOfFirst(this.markup,e,"{","}"),!(e>=0&&e<this.markup.length-1&&this.markup.charAt(e+1)===this.markup.charAt(e))){if(e>=0&&"}"===this.markup.charAt(e))throw new n("Single '}' encountered in format string");break}e+=2}if(e<0)t.literalText=this.unescapeBraces(this.markup.substring(this.index)),this.index=this.markup.length;else{t.literalText=this.unescapeBraces(this.markup.substring(this.index,e)),e++;let i=e,s=1;for(;e<this.markup.length;){if("{"===this.markup.charAt(e))s++,t.formatSpecNeedsExpanding=!0;else if("}"===this.markup.charAt(e)&&(s--,0===s)){this.parseField(t,this.markup.substring(i,e)),e++;break}e++}if(s>0)throw new n("Single '{' encountered in format string");this.index=e}return t}isBytes(){return this.bytes}unescapeBraces(t){return t.replace("{{","{").replace("}}","}")}parseField(t,e){let i=this.indexOfFirst(e,0,"!",":");if(i>=0)if(t.fieldName=e.substring(0,i),"!"===e.charAt(i)){if(i===e.length-1)throw new n("end of format while looking for conversion specifier");if(t.conversion=e.substring(i+1,i+2),i+=2,i<e.length){if(":"!==e.charAt(i))throw new n("expected ':' after conversion specifier");t.formatSpec=e.substring(i+1)}}else t.formatSpec=e.substring(i+1);else t.fieldName=e;if(!t.fieldName)return void(t.fieldName=this.numbering.nextAutomaticFieldNumber());let s=t.fieldName.charAt(0);"."!==s&&"["!==s?Number.isInteger(parseInt(s))&&this.numbering.useManualFieldNumbering():t.fieldName=this.numbering.nextAutomaticFieldNumber()+t.fieldName}indexOfFirst(t,e,i,s){let r=t.indexOf(i,e),n=t.indexOf(s,e);return-1===r?n:-1===n?r:Math.min(r,n)}static FieldNumbering=class{constructor(){this.manualFieldNumberSpecified=!1,this.automaticFieldNumber=0}nextAutomaticFieldNumber(){if(this.manualFieldNumberSpecified)throw new n("cannot switch from manual field specification to automatic field numbering");return String(this.automaticFieldNumber++)}useManualFieldNumbering(){if(!this.manualFieldNumberSpecified){if(0!==this.automaticFieldNumber)throw new n("cannot switch from automatic field numbering to manual field specification");this.manualFieldNumberSpecified=!0}}};static Chunk=class{constructor(){this.literalText=null,this.fieldName=null,this.formatSpec=null,this.conversion=null,this.formatSpecNeedsExpanding=null}}}class g{static TYPE="PyType";static REGISTRY={};constructor(t){this.st=t}getString(){return this.st}format(...t){if(void 0===this.st||null===this.st)throw Error("cannot format value: "+String(this.st));const e=this.parseArgs(...t);return this.buildFormattedString(e,null,null)}parseArgs(...t){let e=0;const i={};for(const s of t)Array.isArray(s)||"object"!=typeof s||null===s?(i[String(e)]=s,e+=1):Object.assign(i,s);return i}buildFormattedString(t,e,s){let r;r=null===e?new u(this):new u(e,s);let n="";for(;;){let s=r.nextChunk();if(null===s)break;if(n+=s.literalText,null!==s.fieldName){let a;try{a=this.getFieldObject(s.fieldName,r.isBytes(),t)}catch(t){if(i.strict||"IndexError"!==t.name&&"KeyError"!==t.name)throw t;s.formatSpec=null,s.conversion=null,s.formatSpecNeedsExpanding=null,a=""}null===a&&(a="null");let l=s.formatSpec;if(s.formatSpecNeedsExpanding){if(null!==e)throw new h("Max string recursion exceeded");l=this.buildFormattedString(t,r,l)}n=this.renderField(a,l,n)}}return n}getFieldObject(t,e,i){let s=new p(t,e),r=s.pyHead(),n=null;if(!i.hasOwnProperty(String(r)))throw Number.isInteger(r)?new a(`index out of range: ${r}`):new l(`name not defined: ${r}`);for(n=i[String(r)];null!==n;){let t=s.nextChunk();if(null===t)break;let e=t.value;n=t.is_attr?n[String(e)]:Number.isInteger(parseInt(e))?n[parseInt(e)]:n[String(e)]}return n}renderField(t,e,i){return i+String(this.renderFieldObj(t,e))}renderFieldObj(t,e){let i=null;"number"==typeof t&&(i=parseInt(t)===t?this.constructor.REGISTRY.PyInteger:this.constructor.REGISTRY.PyFloat),i||(i=this.constructor.REGISTRY.PyString);let s=null===e?"":String(e);return t?.constructor.TYPE!==i.TYPE&&(t=new i(t)),t.__format__(s)}}class f extends o.Formatter{constructor(t,e){void 0===e&&(e=t,t=""),super(t,e)}format(t){this.setStart();let e=this.spec.precision,i=t.length;if(o.Spec.specified(e)&&e<i){let i=0;for(;i<e;){let e=t.charAt(i++);this.result+=e}this.lenWhole=i}else this.lenWhole=i,this.result+=t;return this}}class d extends g{static TYPE="PyString";static FormatterClass=f;__format__(t){let e=o.fromText(t),i=this.constructor.prepareFormatter(e);if(!i)throw r.unknownFormat(e.type,"string");return"string"==typeof this.st||this.st instanceof String?i.format(this.st):i.format(String(this.st)),i.pad().getResult()}static prepareFormatter(t){switch(t.type){case o.Spec.NONE:case"s":if(t.grouping)throw r.notAllowed("Grouping","string",t.type);if(o.Spec.specified(t.sign))throw r.signNotAllowed("string","\0");if(t.alternate)throw r.alternateFormNotAllowed("string");if("="===t.align)throw r.alignmentNotAllowed("=","string");return t=t.withDefaults(o.Spec.STRING),new this.FormatterClass(t);default:return null}}}g.REGISTRY.PyString=d;class m extends o.Formatter{static MAX_PRECISION=1400;lenPoint=0;lenFraction=0;lenMarker=0;lenExponent=0;minFracDigits=0;constructor(t,e){void 0===e&&(e=t,t=""),super(t,e),this.spec.alternate?this.minFracDigits=-1:"r"===this.spec.type||this.spec.type===o.Spec.NONE?this.minFracDigits=1:this.minFracDigits=0}setMinFracDigits(t){this.minFracDigits=t}reset(){super.reset(),this.lenPoint=this.lenFraction=this.lenMarker=this.lenExponent=0}sectionLengths(){return[this.lenSign,this.lenWhole,this.lenPoint,this.lenFraction,this.lenMarker,this.lenExponent]}format(t,e){this.setStart();let i=this.spec.getPrecision(o.Spec.specified(this.spec.type)?6:12);if(i>this.constructor.MAX_PRECISION)throw r.precisionTooLarge("float");let s=this.spec.sign;switch(null===e&&o.Spec.specified(s)&&"-"!==s&&(e=String(s)),String(this.spec.type).toLowerCase()){case"e":this.format_e(t,e,i);break;case"f":this.format_f(t,e,i);break;case"n":case"g":this.format_g(t,e,i,0);break;case o.Spec.NONE:this.format_g(t,e,i,-1);break;case"r":this.format_r(t,e);break;case"%":this.format_f(100*t,e,i),this.result+="%";break;default:throw r.unknownFormat(this.spec.type,"float")}return this.spec.type===String(this.spec.type).toUpperCase()&&this.uppercase(),this.spec.grouping&&this.groupDigits(3,","),this}uppercase(){this.result=this.result.toUpperCase()}signAndSpecialNumber(t,e){return isNaN(t)?(e?(this.result+="+nan",this.lenSign=e.length):this.result+="nan",this.lenMarker=3,!0):t===Number.NEGATIVE_INFINITY?(this.result+="-inf",this.lenSign=1,this.lenMarker=3,!0):t===Number.NEGATIVE_INFINITY?(e?(this.result+="+inf",this.lenSign=e.length):this.result+="inf",this.lenMarker=3,!0):0===t?(this.result+="0",this.lenWhole=1,!0):(t<0&&(this.result+="-",this.lenSign=1),!1)}format_e(t,e,i){let s=0;if(!this.signAndSpecialNumber(t,e)){let e,r=(t=Math.abs(Number(t))).toExponential();[e,s]=r.split("e+"),e=Number(e).toFixed(i),s=Number(s);let[n,h]=`${e}.`.split(".",2),a=n+h,l=a.length;this.result+=a.charAt(0),this.lenWhole=1,l>1&&(this.result+="."+a.substring(1),this.lenPoint=1,this.lenFraction=l-1)}0===this.lenMarker&&(this.ensurePointAndTrailingZeros(i),this.appendExponent(s))}format_f(t,e,i){if(!this.signAndSpecialNumber(t,e)){t=(t=Math.abs(Number(t))).toFixed(i),this.result+=t;let[,e]=`${t}.`.split(".",2);(this.lenFraction=e.length)>0?this.lenWhole=this.result.length-(this.start+this.lenSign+(this.lenPoint=1)+this.lenFraction):this.lenWhole=this.result.length-(this.start+this.lenSign)}0===this.lenMarker&&this.ensurePointAndTrailingZeros(i)}ensurePointAndTrailingZeros(t){t<this.minFracDigits&&(t=this.minFracDigits),0===this.lenPoint&&(t>0||this.minFracDigits<0)&&(this.result+=".",this.lenPoint=1);let e=this.lenFraction;if(t>e){for(;e<t;e++)this.result+="0";this.lenFraction=e}}format_g(t,e,i,s){let r=(i=Math.max(1,i))+s;if(this.signAndSpecialNumber(t,e))this.zeroHelper(i,r);else{t=Math.abs(Number(t));let[e,s]=`${t}.`.split(".",2),n=e+s,h=t.toExponential(),[,a]=h.split("e+");a=parseInt(a),-4<=a&&a<r?this.appendFixed(n,a,i):this.appendExponential(n,a)}}format_r(t,e){return this.format_g(t,e,17,16)}zeroHelper(t,e){0===this.lenMarker&&(this.minFracDigits<0?this.appendPointAndTrailingZeros(t-1):this.lenFraction<this.minFracDigits&&this.appendTrailingZeros(this.minFracDigits),0>=e&&this.appendExponent(0))}appendFixed(t,e,i){let s=this.minFracDigits<0,r=t.length;if(e<0){this.result+="0.",this.lenWhole=this.lenPoint=1;for(let t=-1;t>e;--t)this.result+="0";this.result+=t,this.lenFraction=r-e-1}else{let n=e+1;if(n<r)this.result+=t.substring(0,n),this.lenWhole=n,this.result+="."+t.substring(n,r),this.lenPoint=1,this.lenFraction=r-n;else{for(this.result+=t;r<n;)this.result+="0",r+=1;this.lenWhole=r}s&&this.appendPointAndTrailingZeros(i-r)}s||(this.lenFraction<this.minFracDigits?this.appendTrailingZeros(this.minFracDigits):this.removeTrailingZeros(this.minFracDigits))}appendExponential(t,e){this.result+=t.charAt(0),this.lenWhole=1;let i=t.length;this.result+="."+t.substring(1,i),this.lenPoint=1,this.lenFraction=i-1,this.minFracDigits>=0&&this.removeTrailingZeros(0),this.appendExponent(e)}appendTrailingZeros(t){let e=this.lenFraction;if(t>e){for(0===this.lenPoint&&(this.result+=".",this.lenPoint=1);e<t;e++)this.result+="0";this.lenFraction=e}}appendPointAndTrailingZeros(t){let e;for(0===this.lenPoint&&(this.result+=".",this.lenPoint=1),e=this.lenFraction;e<t;e++)this.result+="0";this.lenFraction=e}removeTrailingZeros(t){if(this.lenPoint>0){let e=this.lenFraction;if(0===t||e>t){let i=this.result.length-e;for(;e>t&&"0"===this.result.charAt(i-1+e);--e);0===e&&this.lenPoint>0?(this.lenPoint=this.lenFraction=0,e=-1):this.lenFraction=e,i+e<this.result.length&&(this.result=this.result.substring(0,i+e))}}}appendExponent(t){let e,i=this.result.length;t<0?(e=t<=-10?"e-":"e-0",t=-t):e=t<10?"e+0":"e+",this.result+=e+t,this.lenMarker=1,this.lenExponent=this.result.length-i-1}indexOfMarker(){return this.start+this.lenSign+this.lenWhole+this.lenPoint+this.lenFraction}}class S extends g{static TYPE="PyFloat";static FormatterClass=m;__format__(t){let e=o.fromText(t),i=this.constructor.prepareFormatter(e);if(!i)throw r.unknownFormat(e.type,"float");return i.format(this.st),i.pad().getResult()}static prepareFormatter(t){switch(t.type){case"n":if(t.grouping)throw r.notAllowed("Grouping","float",t.type);case o.Spec.NONE:case"e":case"f":case"g":case"E":case"F":case"G":case"%":if(t.alternate)throw r.alternateFormNotAllowed("float");return t=t.withDefaults(o.Spec.NUMERIC),new this.FormatterClass(t);default:return null}}}g.REGISTRY.PyFloat=S;class b extends o.Formatter{constructor(t,e){void 0===e&&(e=t,t=""),super(t,e)}format(t){switch(String(this.spec.type).toLowerCase()){case"d":case o.Spec.NONE:case"u":case"i":this.format_d(t);break;case"x":this.format_x(t,!1);break;case"X":this.format_x(t,!0);break;case"o":this.format_o(t);break;case"b":this.format_b(t);break;case"c":this.format_c(t);break;case"n":this.format_d(t);break;default:throw r.unknownFormat(this.spec.type,"long")}return this.spec.type===String(this.spec.type).toUpperCase()&&this.uppercase(),this.spec.grouping&&this.groupDigits(3,","),this}format_d(t){let e;t<0?(this.negativeSign(null),e=String(-1*t)):(this.positiveSign(null),e=String(t)),this.appendNumber(e)}format_x(t,e){let i,s=e?"0X":"0x";t<0?(this.negativeSign(s),i=this.toHexString(-1*t)):(this.positiveSign(s),i=this.toHexString(t)),e&&(i=i.toUpperCase()),this.appendNumber(i)}format_o(t){let e;t<0?(this.negativeSign("0o"),e=this.toOctalString(-1*t)):(this.positiveSign("0o"),e=this.toOctalString(t)),this.appendNumber(e)}format_b(t){let e;t<0?(this.negativeSign("0b"),e=this.toBinaryString(-1*t)):(this.positiveSign("0b"),e=this.toBinaryString(t)),this.appendNumber(e)}format_c(t){this.result+=String.fromCharCode(t)}positiveSign(t){let e=this.spec.sign;o.Spec.specified(e)&&"-"!==e&&(this.result+=e,this.lenSign=1),null!==t&&this.spec.alternate&&(this.result+=t,this.lenSign+=t.length)}negativeSign(t){this.result+="-",this.lenSign=1,null!==t&&this.spec.alternate&&(this.result+=t,this.lenSign+=t.length)}appendNumber(t){this.lenWhole=t.length,this.result+=t}toHexString(t){return t?t.toString(16):t}toOctalString(t){return t?t.toString(8):t}toBinaryString(t){return t?t.toString(2):t}BIN=o.fromText("#b");OCT=o.fromText("#o");HEX=o.fromText("#x");bin(t){return this.formatNumber(t,this.constructor.BIN)}formatNumber(t,e){const i=new this.constructor(e);return i.format(parseInt(t)),i.getResult()}}class w extends g{static TYPE="PyInteger";static FormatterClass=b;__format__(t){let e=o.fromText(t),i=this.constructor.prepareFormatter(e);if(i)i.format(this.st);else{if(i=S.prepareFormatter(e),!i)throw r.unknownFormat(e.type,"integer");i.format(this.st)}return i.pad().getResult()}static prepareFormatter(t){switch(t.type){case"c":if(o.Spec.specified(t.sign))throw r.signNotAllowed("integer",t.type);if(t.alternate)throw r.alternateFormNotAllowed("integer",t.type);case"x":case"X":case"o":case"b":case"n":if(t.grouping)throw r.notAllowed("Grouping","integer",t.type);case o.Spec.NONE:case"d":if(o.Spec.specified(t.precision))throw r.precisionNotAllowed("integer");return t=t.withDefaults(o.Spec.NUMERIC),new this.FormatterClass(t);default:return null}}}function N(t,...e){return null==t?t:(t=new d(t)).format(...e)}g.REGISTRY.PyInteger=w,N.PyString=d,N.PyInteger=w,N.PyFloat=S,N.PyString=d,N.PyInteger=w,N.PyFloat=S,N.PyError=s,N.FormatError=r,N.IllegalArgumentException=n,N.IndexError=a,N.KeyError=l,N.ValueError=h,N.enableGlobal=function(){Object.defineProperty(String.prototype,"format",{value:function(...t){return N(this,...t)}})},N.setOptions=function(t){Object.assign(i,t);const e=Object.getOwnPropertyDescriptor(String.prototype,"format");if(!i.global&&e)try{delete String.prototype.format}catch(t){throw console.warn("string-format-full could not remove String.prototype.format"),t}else if(i.global)try{Object.defineProperty(String.prototype,"format",{configurable:!0,writable:!0,value:function(...t){return N(this,...t)}})}catch(t){throw console.warn("string-format-full failed monkey-patching String.prototype.format"),t}};const F=N;return e.default})()}));