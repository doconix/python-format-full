!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.format=e():t.format=e()}(self,(function(){return(()=>{var t={757:(t,e,r)=>{t.exports=r(666)},666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),s=new A(n||[]);return o._invoke=function(t,e,r){var n=h;return function(i,o){if(n===p)throw new Error("Generator is already running");if(n===g){if("throw"===i)throw o;return I()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=F(s,r);if(a){if(a===y)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=l(t,e,r);if("normal"===u.type){if(n=r.done?g:f,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=g,r.method="throw",r.arg=u.arg)}}}(t,r,s),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",p="executing",g="completed",y={};function v(){}function d(){}function m(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==r&&n.call(k,o)&&(b=k);var S=m.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function N(t,e){function r(i,o,s,a){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return r("throw",t,s,a)}))}a(u.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function F(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,F(t,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=l(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:I}}function I(){return{value:e,done:!0}}return d.prototype=m,u(S,"constructor",m),u(m,"constructor",d),d.displayName=u(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,a,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},x(N.prototype),u(N.prototype,s,(function(){return this})),t.AsyncIterator=N,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new N(c(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(S),u(S,a,"Generator"),u(S,o,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n={};return(()=>{"use strict";r.d(n,{default:()=>Y});var t={global:!1,strict:!0};function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function g(t,e,r){return g=p()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&s(i,r.prototype),i},g.apply(null,arguments)}function y(t){var e="function"==typeof Map?new Map:void 0;return y=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return g(t,arguments,h(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,t)},y(t)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}var d,m,b=function(t){a(n,t);var r=v(n);function n(t,i){var o;e(this,n);for(var s=arguments.length,a=new Array(s>2?s-2:0),u=2;u<s;u++)a[u-2]=arguments[u];return(o=r.call.apply(r,[this,i].concat(a))).name=t,Error.captureStackTrace&&Error.captureStackTrace(c(o),w),o}return o(n,[{key:"toString",value:function(){return"[".concat(this.name,"] ").concat(this.message)}}]),n}(y(Error)),w=function(t){a(n,t);var r=v(n);function n(){return e(this,n),r.apply(this,arguments)}return o(n,null,[{key:"unknownFormat",value:function(t,e){return new this("UnknownFormat","Unknown format code '"+t+"' for object of type '"+e+"'")}},{key:"alternateFormNotAllowed",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\0";return this.notAllowed("Alternate form (#)",t,e)}},{key:"alignmentNotAllowed",value:function(t,e){return this.notAllowed("'"+t+"' alignment flag",e,"\0")}},{key:"signNotAllowed",value:function(t,e){return this.notAllowed("Sign",t,e)}},{key:"precisionNotAllowed",value:function(t){return this.notAllowed("Precision",t,"\0")}},{key:"zeroPaddingNotAllowed",value:function(t){return this.notAllowed("Zero padding",t,"\0")}},{key:"notAllowed",value:function(t,e){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\0";"\0"===i?(n="in ",r=""):(n="with ",r=" '"+i+"'");var o=t+" not allowed "+n+e+" format specifier"+r;return new this("NotAllowed",o)}},{key:"precisionTooLarge",value:function(t){return new this("PrecisionTooLarge","formatted "+t+" is too long (precision too large?)")}}]),n}(b),k=function(t){a(n,t);var r=v(n);function n(t){return e(this,n),r.call(this,"IllegalArgumentException",t)}return o(n)}(b),S=function(t){a(n,t);var r=v(n);function n(t){return e(this,n),r.call(this,"ValueError",t)}return o(n)}(b),x=function(t){a(n,t);var r=v(n);function n(t){return e(this,n),r.call(this,"IndexError",t)}return o(n)}(b),N=function(t){a(n,t);var r=v(n);function n(t){return e(this,n),r.call(this,"KeyError",t)}return o(n)}(b),F=function(){function t(){e(this,t)}return o(t,null,[{key:"fromText",value:function(e){return new t.Parser(e).parse()}}]),t}();function E(t,e,r){return t.substr(0,e)+r+t.substr(e+r.length)}f(F,"Formatter",function(){function t(r,n){e(this,t),this.spec=n,this.result=r,this.start=this.mark=r.length}return o(t,[{key:"getResult",value:function(){return this.result.toString()}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.result+=void 0===e&&void 0===r?t:t.substring(e,r),this}},{key:"setStart",value:function(){this.start=this.result.length,this.start>this.mark&&this.reset()}},{key:"reset",value:function(){this.lenSign=this.lenWhole=0}},{key:"groupDigits",value:function(t,e){var r=(this.lenWhole-1)/t;if(r>0){var n=this.start+this.lenSign+this.lenWhole;this.makeSpaceAt(n,r);var i=n+r;for(this.lenWhole+=r;i>n;){for(var o=0;o<t;o++)E(this.result,--i,this.result.charAt(--n));E(this.result,--i,e)}}}},{key:"makeSpaceAt",value:function(t,e){var r=this.spec.getFill(" ");this.result=this.result.substring(0,t)+new Array(e+1).join(r)+this.result.substring(t)}},{key:"uppercase",value:function(){this.result=this.result.toUpperCase()}},{key:"pad",value:function(){return arguments.length>=2?this._pad2.apply(this,arguments):this._pad1.apply(this,arguments)}},{key:"_pad1",value:function(){var t=this.spec.width-(this.result.length-this.mark);return t>0&&this.pad(this.mark,t),this}},{key:"_pad2",value:function(t,e){var r=this.spec.getAlign(">"),n=this.spec.getFill(" "),i=e;"^"===r?i=parseInt(e/2):"<"===r&&(i=0);var o=e-i;if(i>0){"="===r?(this.leftIndex=this.start+this.lenSign,this.lenWhole+=i):this.start+=i,this.makeSpaceAt(t,i);for(var s=0;s<i;s++)E(this.result,this.leftIndex+s,n)}for(var a=0;a<o;a++)this.result+=n;"="===r&&"0"===n&&this.spec.grouping&&this.zeroPadAfterSignWithGroupingFixup(3,",")}},{key:"zeroPadAfterSignWithGroupingFixup",value:function(t,e){var r=this.start+this.lenSign,n=r+this.lenWhole,i=t+1;for(n-=i;n>=r;n-=i)E(this.result,n,e);n+i===r&&(this.result=this.result.substring(0,r)+"0"+this.result.substring(r),this.lenWhole+=1)}}]),t}()),f(F,"Spec",(m=d=function(){function t(r,n,i,o,s,a,u,c){e(this,t),this.fill=r,this.align=n,this.sign=i,this.alternate=o,this.width=s,this.grouping=a,this.precision=u,this.type=c||this.constructor.NONE}return o(t,[{key:"toString",value:function(){var t="";return F.Spec.specified(this.fill)&&(t+=this.fill),F.Spec.specified(this.align)&&(t+=this.align),F.Spec.specified(this.sign)&&(t+=this.sign),this.alternate&&(t+="#"),F.Spec.specified(this.width)&&(t+=this.width),this.grouping&&(t+=","),F.Spec.specified(this.precision)&&(t+="."+this.precision),F.Spec.specified(this.type)&&(t+=this.type),t.toString()}},{key:"withDefaults",value:function(t){return new F.Spec(this.constructor.specified(this.fill)?this.fill:t.fill,this.constructor.specified(this.align)?this.align:t.align,this.constructor.specified(this.sign)?this.sign:t.sign,this.alternate||t.alternate,this.constructor.specified(this.width)?this.width:t.width,this.grouping||t.grouping,this.constructor.specified(this.precision)?this.precision:t.precision,this.constructor.specified(this.type)?this.type:t.type)}},{key:"getFill",value:function(t){return this.constructor.specified(this.fill)?this.fill:t}},{key:"getAlign",value:function(t){return this.constructor.specified(this.align)?this.align:t}},{key:"getPrecision",value:function(t){return this.constructor.specified(this.precision)?this.precision:t}},{key:"getType",value:function(t){return this.constructor.specified(this.type)?this.type:t}}]),t}(),f(d,"NONE","￿"),f(d,"UNSPECIFIED",-1),f(d,"specified",(function(t){return Number.isInteger(t)?t>=0:t!==d.NONE})),m)),f(F,"Parser",function(){function t(r){e(this,t),this.spec=r,this.ptr=0}return o(t,[{key:"parse",value:function(){var t,e,r=F.Spec.NONE,n=F.Spec.NONE,i=F.Spec.NONE,o=F.Spec.NONE,s=F.Spec.UNSPECIFIED,a=F.Spec.UNSPECIFIED;if(this.isAlign()?n=this.spec.charAt(this.ptr++):(this.ptr+=1,this.isAlign()?(r=this.spec.charAt(0),n=this.spec.charAt(this.ptr++)):this.ptr=0),this.isAt("+- ")&&(i=this.spec.charAt(this.ptr++)),t=this.scanPast("#"),this.scanPast("0")&&(F.Spec.specified(r)||(r="0",F.Spec.specified(n)||(n="="))),this.isDigit()&&(s=this.scanInteger()),e=this.scanPast(","),this.scanPast(".")){if(!this.isDigit())throw new k("Format specifier missing precision: {".concat(this.spec,"}"));a=this.scanInteger()}if(this.ptr<this.spec.length&&(o=this.spec.charAt(this.ptr++)),this.ptr!==this.spec.length)throw new k("Invalid conversion specification: {".concat(this.spec,"}"));return new F.Spec(r,n,i,t,s,e,a,o)}},{key:"scanPast",value:function(t){return this.ptr<this.spec.length&&this.spec.charAt(this.ptr)===t&&(this.ptr++,!0)}},{key:"isAt",value:function(t){return this.ptr<this.spec.length&&t.indexOf(this.spec.charAt(this.ptr))>=0}},{key:"isAlign",value:function(){return this.ptr<this.spec.length&&"<^>=".indexOf(this.spec.charAt(this.ptr))>=0}},{key:"isDigit",value:function(){return this.ptr<this.spec.length&&Number.isInteger(parseInt(this.spec.charAt(this.ptr)))}},{key:"scanInteger",value:function(){for(var t=this.ptr++;this.isDigit();)this.ptr++;return parseInt(this.spec.substring(t,this.ptr))}}]),t}()),F.Spec.NUMERIC=new F.Spec(" ",">",F.Spec.NONE,!1,F.Spec.UNSPECIFIED,!1,F.Spec.UNSPECIFIED,F.Spec.NONE),F.Spec.STRING=new F.Spec(" ","<",F.Spec.NONE,!1,F.Spec.UNSPECIFIED,!1,F.Spec.UNSPECIFIED,F.Spec.NONE);var P=r(757),A=r.n(P),O=function(t){function r(t,n){e(this,r),this.markup=t,this.bytes=!1,this.index=this.nextDotOrBracket(t);var i=t.substring(0,this.index);this.head=+i,isNaN(this.head)&&(this.head=i)}return o(r,[{key:"wrap",value:function(t){return Number.isInteger(parseInt(t))?parseInt(t):String(t)}},{key:"nextDotOrBracket",value:function(t){var e=t.indexOf(".",this.index);e<0&&(e=t.length);var r=t.indexOf("[",this.index);return r<0&&(r=t.length),Math.min(e,r)}},{key:"head",value:function(){return this.head}},{key:"pyHead",value:function(){return this.wrap(this.head)}},{key:Symbol.iterator,value:A().mark((function t(){var e;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(e=this.nextChunk())){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,[e.is_attr,this.wrap(e.value)];case 6:t.next=0;break;case 8:case"end":return t.stop()}}),t,this)}))},{key:"nextChunk",value:function(){if(this.index===this.markup.length)return null;var t=new r.Chunk;if("["===this.markup.charAt(this.index))this.parseItemChunk(t);else{if("."!==this.markup.charAt(this.index))throw new k("Only '.' or '[' may follow ']' in format field specifier");this.parseAttrChunk(t)}return t}},{key:"parseItemChunk",value:function(t){t.is_attr=!1;var e=this.markup.indexOf("]",this.index+1);if(e<0)throw new k("Missing ']' in format string");var r=this.markup.substring(this.index+1,e);if(0===r.length)throw new k("Empty attribute in format string");try{t.value=parseInt(r)}catch(e){t.value=r}this.index=e+1}},{key:"parseAttrChunk",value:function(t){this.index++,t.is_attr=!0;var e=this.nextDotOrBracket(this.markup);if(e===this.index)throw new k("Empty attribute in format string");t.value=this.markup.substring(this.index,e),this.index=e}}]),r}();f(O,"Chunk",function(){return o((function t(){e(this,t),this.is_attr=null,this.value=null}))}());var I=function(){function t(){return e(this,t),arguments.length>=2?this.constructor2.apply(this,arguments):this.constructor1.apply(this,arguments)}return o(t,[{key:"constructor1",value:function(e){this.markup=e.getString(),this.bytes=!1,this.numbering=new t.FieldNumbering}},{key:"constructor2",value:function(t,e){this.markup=e,this.bytes=t.bytes,this.numbering=t.numbering}},{key:"nextChunk",value:function(){if(this.index===this.markup.length)return null;for(var e=new t.Chunk,r=this.index;;){if(!((r=this.indexOfFirst(this.markup,r,"{","}"))>=0&&r<this.markup.length-1&&this.markup.charAt(r+1)===this.markup.charAt(r))){if(r>=0&&"}"===this.markup.charAt(r))throw new k("Single '}' encountered in format string");break}r+=2}if(r<0)e.literalText=this.unescapeBraces(this.markup.substring(this.index)),this.index=this.markup.length;else{e.literalText=this.unescapeBraces(this.markup.substring(this.index,r));for(var n=++r,i=1;r<this.markup.length;){if("{"===this.markup.charAt(r))i++,e.formatSpecNeedsExpanding=!0;else if("}"===this.markup.charAt(r)&&0==--i){this.parseField(e,this.markup.substring(n,r)),r++;break}r++}if(i>0)throw new k("Single '{' encountered in format string");this.index=r}return e}},{key:"isBytes",value:function(){return this.bytes}},{key:"unescapeBraces",value:function(t){return t.replace("{{","{").replace("}}","}")}},{key:"parseField",value:function(t,e){var r=this.indexOfFirst(e,0,"!",":");if(r>=0)if(t.fieldName=e.substring(0,r),"!"===e.charAt(r)){if(r===e.length-1)throw new k("end of format while looking for conversion specifier");if(t.conversion=e.substring(r+1,r+2),(r+=2)<e.length){if(":"!==e.charAt(r))throw new k("expected ':' after conversion specifier");t.formatSpec=e.substring(r+1)}}else t.formatSpec=e.substring(r+1);else t.fieldName=e;if(t.fieldName){var n=t.fieldName.charAt(0);"."!==n&&"["!==n?Number.isInteger(parseInt(n))&&this.numbering.useManualFieldNumbering():t.fieldName=this.numbering.nextAutomaticFieldNumber()+t.fieldName}else t.fieldName=this.numbering.nextAutomaticFieldNumber()}},{key:"indexOfFirst",value:function(t,e,r,n){var i=t.indexOf(r,e),o=t.indexOf(n,e);return-1===i?o:-1===o?i:Math.min(i,o)}}]),t}();f(I,"TYPE","MarkupIterator"),f(I,"FieldNumbering",function(){function t(){e(this,t),this.manualFieldNumberSpecified=!1,this.automaticFieldNumber=0}return o(t,[{key:"nextAutomaticFieldNumber",value:function(){if(this.manualFieldNumberSpecified)throw new k("cannot switch from manual field specification to automatic field numbering");return String(this.automaticFieldNumber++)}},{key:"useManualFieldNumbering",value:function(){if(!this.manualFieldNumberSpecified){if(0!==this.automaticFieldNumber)throw new k("cannot switch from automatic field numbering to manual field specification");this.manualFieldNumberSpecified=!0}}}]),t}()),f(I,"Chunk",function(){return o((function t(){e(this,t),this.literalText=null,this.fieldName=null,this.formatSpec=null,this.conversion=null,this.formatSpecNeedsExpanding=null}))}());var _=function(){function r(t){e(this,r),this.st=t}return o(r,[{key:"getString",value:function(){return this.st}},{key:"format",value:function(){if(void 0===this.st||null===this.st)throw Error("cannot format value: "+String(this.st));var t=this.parseArgs.apply(this,arguments);return this.buildFormattedString(t,null,null)}},{key:"parseArgs",value:function(){for(var t=0,e={},r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];for(var o=0,s=n;o<s.length;o++){var a=s[o];Array.isArray(a)||"object"!==u(a)||null===a?(e[String(t)]=a,t+=1):Object.assign(e,a)}return e}},{key:"buildFormattedString",value:function(e,r,n){var i;i=null===r?new I(this):new I(r,n);for(var o="";;){var s=i.nextChunk();if(null===s)break;if(o+=s.literalText,null!==s.fieldName){var a=void 0;try{a=this.getFieldObject(s.fieldName,i.isBytes(),e)}catch(e){if(t.strict||"IndexError"!==e.name&&"KeyError"!==e.name)throw e;s.formatSpec=null,s.conversion=null,s.formatSpecNeedsExpanding=null,a=""}null===a&&(a="null");var u=s.formatSpec;if(s.formatSpecNeedsExpanding){if(null!==r)throw new S("Max string recursion exceeded");u=this.buildFormattedString(e,i,u)}o=this.renderField(a,u,o)}}return o}},{key:"getFieldObject",value:function(t,e,r){var n=new O(t,e),i=n.pyHead(),o=null;if(!r.hasOwnProperty(String(i)))throw Number.isInteger(i)?new x("index out of range: ".concat(i)):new N("name not defined: ".concat(i));for(o=r[String(i)];null!==o;){var s=n.nextChunk();if(null===s)break;var a=s.value;o=s.is_attr?o[String(a)]:Number.isInteger(parseInt(a))?o[parseInt(a)]:o[String(a)]}return o}},{key:"renderField",value:function(t,e,r){return r+String(this.renderFieldObj(t,e))}},{key:"renderFieldObj",value:function(t,e){var r,n=null;"number"==typeof t&&(n=parseInt(t)===t?this.constructor.REGISTRY.PyInteger:this.constructor.REGISTRY.PyFloat),n||(n=this.constructor.REGISTRY.PyString);var i=null===e?"":String(e);return(null===(r=t)||void 0===r?void 0:r.constructor.TYPE)!==n.TYPE&&(t=new n(t)),t.__format__(i)}}]),r}();f(_,"TYPE","PyType"),f(_,"REGISTRY",{});var R=function(t){a(s,t);var r,n,i=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(n){var i=h(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return l(this,t)});function s(t,r){return e(this,s),void 0===r&&(r=t,t=""),i.call(this,t,r)}return o(s,[{key:"format",value:function(t){this.setStart();var e=this.spec.precision,r=t.length;if(F.Spec.specified(e)&&e<r){for(var n=0;n<e;){var i=t.charAt(n++);this.result+=i}this.lenWhole=n}else this.lenWhole=r,this.result+=t;return this}}]),s}(F.Formatter);var T=function(t){a(s,t);var r,n,i=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(n){var i=h(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return l(this,t)});function s(){return e(this,s),i.apply(this,arguments)}return o(s,[{key:"__format__",value:function(t){var e=F.fromText(t),r=this.constructor.prepareFormatter(e);if(!r)throw w.unknownFormat(e.type,"string");return"string"==typeof this.st||this.st instanceof String?r.format(this.st):r.format(String(this.st)),r.pad().getResult()}}],[{key:"prepareFormatter",value:function(t){switch(t.type){case F.Spec.NONE:case"s":if(t.grouping)throw w.notAllowed("Grouping","string",t.type);if(F.Spec.specified(t.sign))throw w.signNotAllowed("string","\0");if(t.alternate)throw w.alternateFormNotAllowed("string");if("="===t.align)throw w.alignmentNotAllowed("=","string");return t=t.withDefaults(F.Spec.STRING),new this.FormatterClass(t);default:return null}}}]),s}(_);function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],s=!0,a=!1;try{for(r=r.call(t);!(s=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==r.return||r.return()}finally{if(a)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=D(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},L.apply(this,arguments)}f(T,"TYPE","PyString"),f(T,"FormatterClass",R),_.REGISTRY.PyString=T;var M=function(t){a(s,t);var r,n,i=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(n){var i=h(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return l(this,t)});function s(t,r){var n;return e(this,s),void 0===r&&(r=t,t=""),f(c(n=i.call(this,t,r)),"lenPoint",0),f(c(n),"lenFraction",0),f(c(n),"lenMarker",0),f(c(n),"lenExponent",0),f(c(n),"minFracDigits",0),n.spec.alternate?n.minFracDigits=-1:"r"===n.spec.type||n.spec.type===F.Spec.NONE?n.minFracDigits=1:n.minFracDigits=0,n}return o(s,[{key:"setMinFracDigits",value:function(t){this.minFracDigits=t}},{key:"reset",value:function(){L(h(s.prototype),"reset",this).call(this),this.lenPoint=this.lenFraction=this.lenMarker=this.lenExponent=0}},{key:"sectionLengths",value:function(){return[this.lenSign,this.lenWhole,this.lenPoint,this.lenFraction,this.lenMarker,this.lenExponent]}},{key:"format",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.setStart();var r=this.spec.getPrecision(F.Spec.specified(this.spec.type)?6:12);if(r>this.constructor.MAX_PRECISION)throw w.precisionTooLarge("float");var n=this.spec.sign;switch(null===e&&F.Spec.specified(n)&&"-"!==n&&(e=String(n)),String(this.spec.type).toLowerCase()){case"e":this.format_e(t,e,r);break;case"f":this.format_f(t,e,r);break;case"n":case"g":this.format_g(t,e,r,0);break;case F.Spec.NONE:this.format_g(t,e,r,-1);break;case"r":this.format_r(t,e);break;case"%":this.format_f(100*t,e,r),this.result+="%";break;default:throw w.unknownFormat(this.spec.type,"float")}return this.spec.type===String(this.spec.type).toUpperCase()&&this.uppercase(),this.spec.grouping&&this.groupDigits(3,","),this}},{key:"uppercase",value:function(){this.result=this.result.toUpperCase()}},{key:"signAndSpecialNumber",value:function(t,e){return isNaN(t)?(e?(this.result+="+nan",this.lenSign=e.length):this.result+="nan",this.lenMarker=3,!0):t===Number.NEGATIVE_INFINITY?(this.result+="-inf",this.lenSign=1,this.lenMarker=3,!0):t===Number.NEGATIVE_INFINITY?(e?(this.result+="+inf",this.lenSign=e.length):this.result+="inf",this.lenMarker=3,!0):0===t?(this.result+="0",this.lenWhole=1,!0):(t<0&&(this.result+="-",this.lenSign=1),!1)}},{key:"format_e",value:function(t,e,r){var n=0;if(!this.signAndSpecialNumber(t,e)){var i,o=C((t=Math.abs(Number(t))).toExponential().split("e+"),2);i=o[0],n=o[1],i=Number(i).toFixed(r),n=Number(n);var s=C("".concat(i,".").split(".",2),2),a=s[0]+s[1],u=a.length;this.result+=a.charAt(0),this.lenWhole=1,u>1&&(this.result+="."+a.substring(1),this.lenPoint=1,this.lenFraction=u-1)}0===this.lenMarker&&(this.ensurePointAndTrailingZeros(r),this.appendExponent(n))}},{key:"format_f",value:function(t,e,r){if(!this.signAndSpecialNumber(t,e)){t=(t=Math.abs(Number(t))).toFixed(r),this.result+=t;var n=C("".concat(t,".").split(".",2),2)[1];(this.lenFraction=n.length)>0?this.lenWhole=this.result.length-(this.start+this.lenSign+(this.lenPoint=1)+this.lenFraction):this.lenWhole=this.result.length-(this.start+this.lenSign)}0===this.lenMarker&&this.ensurePointAndTrailingZeros(r)}},{key:"ensurePointAndTrailingZeros",value:function(t){t<this.minFracDigits&&(t=this.minFracDigits),0===this.lenPoint&&(t>0||this.minFracDigits<0)&&(this.result+=".",this.lenPoint=1);var e=this.lenFraction;if(t>e){for(;e<t;e++)this.result+="0";this.lenFraction=e}}},{key:"format_g",value:function(t,e,r,n){var i=(r=Math.max(1,r))+n;if(this.signAndSpecialNumber(t,e))this.zeroHelper(r,i);else{t=Math.abs(Number(t));var o=C("".concat(t,".").split(".",2),2),s=o[0]+o[1],a=C(t.toExponential().split("e+"),2)[1];-4<=(a=parseInt(a))&&a<i?this.appendFixed(s,a,r):this.appendExponential(s,a)}}},{key:"format_r",value:function(t,e){return this.format_g(t,e,17,16)}},{key:"zeroHelper",value:function(t,e){0===this.lenMarker&&(this.minFracDigits<0?this.appendPointAndTrailingZeros(t-1):this.lenFraction<this.minFracDigits&&this.appendTrailingZeros(this.minFracDigits),0>=e&&this.appendExponent(0))}},{key:"appendFixed",value:function(t,e,r){var n=this.minFracDigits<0,i=t.length;if(e<0){this.result+="0.",this.lenWhole=this.lenPoint=1;for(var o=-1;o>e;--o)this.result+="0";this.result+=t,this.lenFraction=i-e-1}else{var s=e+1;if(s<i)this.result+=t.substring(0,s),this.lenWhole=s,this.result+="."+t.substring(s,i),this.lenPoint=1,this.lenFraction=i-s;else{for(this.result+=t;i<s;)this.result+="0",i+=1;this.lenWhole=i}n&&this.appendPointAndTrailingZeros(r-i)}n||(this.lenFraction<this.minFracDigits?this.appendTrailingZeros(this.minFracDigits):this.removeTrailingZeros(this.minFracDigits))}},{key:"appendExponential",value:function(t,e){this.result+=t.charAt(0),this.lenWhole=1;var r=t.length;this.result+="."+t.substring(1,r),this.lenPoint=1,this.lenFraction=r-1,this.minFracDigits>=0&&this.removeTrailingZeros(0),this.appendExponent(e)}},{key:"appendTrailingZeros",value:function(t){var e=this.lenFraction;if(t>e){for(0===this.lenPoint&&(this.result+=".",this.lenPoint=1);e<t;e++)this.result+="0";this.lenFraction=e}}},{key:"appendPointAndTrailingZeros",value:function(t){var e;for(0===this.lenPoint&&(this.result+=".",this.lenPoint=1),e=this.lenFraction;e<t;e++)this.result+="0";this.lenFraction=e}},{key:"removeTrailingZeros",value:function(t){if(this.lenPoint>0){var e=this.lenFraction;if(0===t||e>t){for(var r=this.result.length-e;e>t&&"0"===this.result.charAt(r-1+e);--e);0===e&&this.lenPoint>0?(this.lenPoint=this.lenFraction=0,e=-1):this.lenFraction=e,r+e<this.result.length&&(this.result=this.result.substring(0,r+e))}}}},{key:"appendExponent",value:function(t){var e,r=this.result.length;t<0?(e=t<=-10?"e-":"e-0",t=-t):e=t<10?"e+0":"e+",this.result+=e+t,this.lenMarker=1,this.lenExponent=this.result.length-r-1}},{key:"indexOfMarker",value:function(){return this.start+this.lenSign+this.lenWhole+this.lenPoint+this.lenFraction}}]),s}(F.Formatter);f(M,"MAX_PRECISION",1400);var B=function(t){a(s,t);var r,n,i=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(n){var i=h(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return l(this,t)});function s(){return e(this,s),i.apply(this,arguments)}return o(s,[{key:"__format__",value:function(t){var e=F.fromText(t),r=this.constructor.prepareFormatter(e);if(!r)throw w.unknownFormat(e.type,"float");return r.format(this.st),r.pad().getResult()}}],[{key:"prepareFormatter",value:function(t){switch(t.type){case"n":if(t.grouping)throw w.notAllowed("Grouping","float",t.type);case F.Spec.NONE:case"e":case"f":case"g":case"E":case"F":case"G":case"%":if(t.alternate)throw w.alternateFormNotAllowed("float");return t=t.withDefaults(F.Spec.NUMERIC),new this.FormatterClass(t);default:return null}}}]),s}(_);f(B,"TYPE","PyFloat"),f(B,"FormatterClass",M),_.REGISTRY.PyFloat=B;var G=function(t){a(s,t);var r,n,i=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(n){var i=h(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return l(this,t)});function s(t,r){var n;return e(this,s),void 0===r&&(r=t,t=""),f(c(n=i.call(this,t,r)),"BIN",F.fromText("#b")),f(c(n),"OCT",F.fromText("#o")),f(c(n),"HEX",F.fromText("#x")),n}return o(s,[{key:"format",value:function(t){switch(String(this.spec.type).toLowerCase()){case"d":case F.Spec.NONE:case"u":case"i":this.format_d(t);break;case"x":this.format_x(t,!1);break;case"X":this.format_x(t,!0);break;case"o":this.format_o(t);break;case"b":this.format_b(t);break;case"c":this.format_c(t);break;case"n":this.format_d(t);break;default:throw w.unknownFormat(this.spec.type,"long")}return this.spec.type===String(this.spec.type).toUpperCase()&&this.uppercase(),this.spec.grouping&&this.groupDigits(3,","),this}},{key:"format_d",value:function(t){var e;t<0?(this.negativeSign(null),e=String(-1*t)):(this.positiveSign(null),e=String(t)),this.appendNumber(e)}},{key:"format_x",value:function(t,e){var r,n=e?"0X":"0x";t<0?(this.negativeSign(n),r=this.toHexString(-1*t)):(this.positiveSign(n),r=this.toHexString(t)),e&&(r=r.toUpperCase()),this.appendNumber(r)}},{key:"format_o",value:function(t){var e;t<0?(this.negativeSign("0o"),e=this.toOctalString(-1*t)):(this.positiveSign("0o"),e=this.toOctalString(t)),this.appendNumber(e)}},{key:"format_b",value:function(t){var e;t<0?(this.negativeSign("0b"),e=this.toBinaryString(-1*t)):(this.positiveSign("0b"),e=this.toBinaryString(t)),this.appendNumber(e)}},{key:"format_c",value:function(t){this.result+=String.fromCharCode(t)}},{key:"positiveSign",value:function(t){var e=this.spec.sign;F.Spec.specified(e)&&"-"!==e&&(this.result+=e,this.lenSign=1),null!==t&&this.spec.alternate&&(this.result+=t,this.lenSign+=t.length)}},{key:"negativeSign",value:function(t){this.result+="-",this.lenSign=1,null!==t&&this.spec.alternate&&(this.result+=t,this.lenSign+=t.length)}},{key:"appendNumber",value:function(t){this.lenWhole=t.length,this.result+=t}},{key:"toHexString",value:function(t){return t?t.toString(16):t}},{key:"toOctalString",value:function(t){return t?t.toString(8):t}},{key:"toBinaryString",value:function(t){return t?t.toString(2):t}},{key:"bin",value:function(t){return this.formatNumber(t,this.constructor.BIN)}},{key:"formatNumber",value:function(t,e){var r=new this.constructor(e);return r.format(parseInt(t)),r.getResult()}}]),s}(F.Formatter);var W=function(t){a(s,t);var r,n,i=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(n){var i=h(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return l(this,t)});function s(){return e(this,s),i.apply(this,arguments)}return o(s,[{key:"__format__",value:function(t){var e=F.fromText(t),r=this.constructor.prepareFormatter(e);if(r)r.format(this.st);else{if(!(r=B.prepareFormatter(e)))throw w.unknownFormat(e.type,"integer");r.format(this.st)}return r.pad().getResult()}}],[{key:"prepareFormatter",value:function(t){switch(t.type){case"c":if(F.Spec.specified(t.sign))throw w.signNotAllowed("integer",t.type);if(t.alternate)throw w.alternateFormNotAllowed("integer",t.type);case"x":case"X":case"o":case"b":case"n":if(t.grouping)throw w.notAllowed("Grouping","integer",t.type);case F.Spec.NONE:case"d":if(F.Spec.specified(t.precision))throw w.precisionNotAllowed("integer");return t=t.withDefaults(F.Spec.NUMERIC),new this.FormatterClass(t);default:return null}}}]),s}(_);function U(t){var e;if(null==t)return t;t=new T(t);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(e=t).format.apply(e,n)}f(W,"TYPE","PyInteger"),f(W,"FormatterClass",G),_.REGISTRY.PyInteger=W,U.PyString=T,U.PyInteger=W,U.PyFloat=B,U.PyString=T,U.PyInteger=W,U.PyFloat=B,U.PyError=b,U.FormatError=w,U.IllegalArgumentException=k,U.IndexError=x,U.KeyError=N,U.ValueError=S,U.enableGlobal=function(){Object.defineProperty(String.prototype,"format",{value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return U.apply(void 0,[this].concat(e))}})},U.setOptions=function(e){Object.assign(t,e);var r=Object.getOwnPropertyDescriptor(String.prototype,"format");if(!t.global&&r)try{delete String.prototype.format}catch(t){throw console.warn("string-format-full could not remove String.prototype.format"),t}else if(t.global)try{Object.defineProperty(String.prototype,"format",{configurable:!0,writable:!0,value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return U.apply(void 0,[this].concat(e))}})}catch(t){throw console.warn("string-format-full failed monkey-patching String.prototype.format"),t}};const Y=U})(),n.default})()}));